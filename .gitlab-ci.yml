image:    "opensuse:latest"
stages:
  - build

build:
  stage:  build
  script:
    - zypper in -y gcc curl grub2 make nasm
    - curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain nightly
    - source ~/.cargo/env
    - rustc --version
    - cargo --version
    - nasm -v
    - rustup component add rust-src
    - cargo install xargo
    - make iso
  artifacts:
    paths:
      - bin/img/boot.iso
